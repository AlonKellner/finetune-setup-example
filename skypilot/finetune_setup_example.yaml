name: finetune_setup_example

resources:
  cloud: runpod
  accelerators: { A100-80GB:1, A100-80GB-SXM:1 }
  use_spot: true # Use spot instances to save cost.
  image_id: blabla:foofoo

setup: |
  git clone https://github.com/AlonKellner/finetune-setup-example.git .

run: |
  uvx py-spy record -f raw -o profile.pyspy --subprocesses --full-filenames -r 10 -- \
  /app/.venv/bin/python src/finetune_setup_example/train.py && \
  /app/.venv/bin/python src/finetune_setup_example/pyspy_upload.py
